✅ 1. CommonJS 和 ESModule 的区别？
对比项	CommonJS	ESModule
加载时机	运行时	编译时
加载方式	同步	异步
值传递	拷贝	引用绑定
是否可 Tree-shake	否	是
使用环境	Node.js	浏览器 & Node


✅ 2. Tree Shaking 为什么只能在 ESM 下实现？

因为 Tree Shaking 依赖于 静态分析，而只有 ESM 的 import/export 是编译期可确定依赖关系的。
CommonJS 的 require() 是运行时行为，依赖动态，不可静态分析。

✅ 3. 为什么 CommonJS 导入的值不会实时更新？

因为是值拷贝。
模块在第一次执行后被缓存，再次引入取缓存对象，而非重新执行。

✅ 4. 浏览器里如何使用 ESM？
<script type="module" src="./main.js"></script>


自动启用严格模式；

模块作用域隔离；

支持 import/export；

可使用 import.meta.url。

✅ 5. 为什么 import 必须写在顶层？

因为 ESM 是编译期静态分析的，编译器需要在解析阶段确定依赖关系。
如果放在条件语句中，就无法静态确定依赖。